<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.web.hospital.mapper.dbo.bookingMapper">
	<resultMap id="BaseResultMap" type="com.web.hospital.model.booking">
		<!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 09 14:06:43 ICT 2024.
    -->
		<result column="Stt" jdbcType="INTEGER" property="stt" />
		<result column="hoTenBenhNhan" jdbcType="NVARCHAR"
			property="hotenbenhnhan" />
		<result column="namSinh" jdbcType="NVARCHAR" property="namsinh" />
		<result column="gioiTinh" jdbcType="NVARCHAR" property="gioitinh" />
		<result column="SDT" jdbcType="NVARCHAR" property="sdt" />
		<result column="diaChi" jdbcType="NVARCHAR" property="diachi" />
		<result column="email" jdbcType="NVARCHAR" property="email" />
		<result column="hoTenBacSi" jdbcType="NVARCHAR" property="hotenbacsi" />
		<result column="ngaydat" jdbcType="NVARCHAR" property="ngaydat" />
		<result column="note" jdbcType="NVARCHAR" property="note" />
	</resultMap>
	<sql id="Example_Where_Clause">
		<!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 09 14:06:43 ICT 2024.
    -->
		<where>
			<foreach collection="oredCriteria" item="criteria" separator="or">
				<if test="criteria.valid">
					<trim prefix="(" prefixOverrides="and" suffix=")">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
								</when>
								<when test="criterion.singleValue">
									and ${criterion.condition}
									#{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition}
									#{criterion.value} and
									#{criterion.secondValue}
								</when>
								<when test="criterion.listValue"> and
									${criterion.condition} <foreach close=")"
										collection="criterion.value"
										item="listItem" open="(" separator=",">
									#{listItem}
									</foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Update_By_Example_Where_Clause">
		<!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 09 14:06:43 ICT 2024.
    -->
		<where>
			<foreach collection="example.oredCriteria" item="criteria"
				separator="or">
				<if test="criteria.valid">
					<trim prefix="(" prefixOverrides="and" suffix=")">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
								</when>
								<when test="criterion.singleValue">
									and ${criterion.condition}
									#{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition}
									#{criterion.value} and
									#{criterion.secondValue}
								</when>
								<when test="criterion.listValue"> and
									${criterion.condition} <foreach close=")"
										collection="criterion.value"
										item="listItem" open="(" separator=",">
									#{listItem}
									</foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Base_Column_List">
		<!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 09 14:06:43 ICT 2024.
    --> Stt, hoTenBenhNhan, namSinh, gioiTinh, SDT,
		diaChi, email, hoTenBacSi, ngaydat, note </sql>
	<select id="selectByExample"
		parameterType="com.web.hospital.model.bookingExample"
		resultMap="BaseResultMap">
		<!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 09 14:06:43 ICT 2024.
    --> select <if test="distinct">
			distinct
		</if>
    <include refid="Base_Column_List" /> from
		dbo.Booking <if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
    <if
			test="orderByClause != null">
			order by ${orderByClause}
		</if>
	</select>
	<delete id="deleteByExample"
		parameterType="com.web.hospital.model.bookingExample">
		<!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 09 14:06:43 ICT 2024.
    --> delete from
		dbo.Booking <if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</delete>
	<insert id="insert" parameterType="com.web.hospital.model.booking">
		<!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 09 14:06:43 ICT 2024.
    --> insert
		into dbo.Booking (Stt, hoTenBenhNhan, namSinh, gioiTinh, SDT, diaChi,
		email, hoTenBacSi, ngaydat, note) values (#{stt,jdbcType=INTEGER},
		#{hotenbenhnhan,jdbcType=NVARCHAR}, #{namsinh,jdbcType=NVARCHAR},
		#{gioitinh,jdbcType=NVARCHAR}, #{sdt,jdbcType=NVARCHAR},
		#{diachi,jdbcType=NVARCHAR}, #{email,jdbcType=NVARCHAR},
		#{hotenbacsi,jdbcType=NVARCHAR}, #{ngaydat,jdbcType=NVARCHAR},
		#{note,jdbcType=NVARCHAR}) </insert>
	<insert id="insertSelective" parameterType="com.web.hospital.model.booking">
		<!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 09 14:06:43 ICT 2024.
    -->
		insert into dbo.Booking <trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="stt != null">
				Stt,
			</if>
			<if test="hotenbenhnhan != null">
				hoTenBenhNhan,
			</if>
			<if test="namsinh != null">
				namSinh,
			</if>
			<if test="gioitinh != null">
				gioiTinh,
			</if>
			<if test="sdt != null">
				SDT,
			</if>
			<if test="diachi != null">
				diaChi,
			</if>
			<if test="email != null">
				email,
			</if>
			<if test="hotenbacsi != null">
				hoTenBacSi,
			</if>
			<if test="ngaydat != null">
				ngaydat,
			</if>
			<if test="note != null">
				note,
			</if>
		</trim>
    <trim prefix="values ("
			suffix=")" suffixOverrides=",">
			<if test="stt != null">
				#{stt,jdbcType=INTEGER},
			</if>
			<if test="hotenbenhnhan != null">
				#{hotenbenhnhan,jdbcType=NVARCHAR},
			</if>
			<if test="namsinh != null">
				#{namsinh,jdbcType=NVARCHAR},
			</if>
			<if test="gioitinh != null">
				#{gioitinh,jdbcType=NVARCHAR},
			</if>
			<if test="sdt != null">
				#{sdt,jdbcType=NVARCHAR},
			</if>
			<if test="diachi != null">
				#{diachi,jdbcType=NVARCHAR},
			</if>
			<if test="email != null">
				#{email,jdbcType=NVARCHAR},
			</if>
			<if test="hotenbacsi != null">
				#{hotenbacsi,jdbcType=NVARCHAR},
			</if>
			<if test="ngaydat != null">
				#{ngaydat,jdbcType=NVARCHAR},
			</if>
			<if test="note != null">
				#{note,jdbcType=NVARCHAR},
			</if>
		</trim>
	</insert>
	<select id="countByExample"
		parameterType="com.web.hospital.model.bookingExample"
		resultType="java.lang.Long">
		<!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 09 14:06:43 ICT 2024.
    --> select count(*) from dbo.Booking <if
			test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</select>
	<update id="updateByExampleSelective" parameterType="map">
		<!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 09 14:06:43 ICT 2024.
    --> update
		dbo.Booking <set>
			<if test="row.stt != null">
				Stt = #{row.stt,jdbcType=INTEGER},
			</if>
			<if test="row.hotenbenhnhan != null">
				hoTenBenhNhan = #{row.hotenbenhnhan,jdbcType=NVARCHAR},
			</if>
			<if test="row.namsinh != null">
				namSinh = #{row.namsinh,jdbcType=NVARCHAR},
			</if>
			<if test="row.gioitinh != null">
				gioiTinh = #{row.gioitinh,jdbcType=NVARCHAR},
			</if>
			<if test="row.sdt != null">
				SDT = #{row.sdt,jdbcType=NVARCHAR},
			</if>
			<if test="row.diachi != null">
				diaChi = #{row.diachi,jdbcType=NVARCHAR},
			</if>
			<if test="row.email != null">
				email = #{row.email,jdbcType=NVARCHAR},
			</if>
			<if test="row.hotenbacsi != null">
				hoTenBacSi = #{row.hotenbacsi,jdbcType=NVARCHAR},
			</if>
			<if test="row.ngaydat != null">
				ngaydat = #{row.ngaydat,jdbcType=NVARCHAR},
			</if>
			<if test="row.note != null">
				note = #{row.note,jdbcType=NVARCHAR},
			</if>
		</set>
    <if
			test="example != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<update id="updateByExample" parameterType="map">
		<!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu May 09 14:06:43 ICT 2024.
    --> update dbo.Booking set Stt
		= #{row.stt,jdbcType=INTEGER}, hoTenBenhNhan =
		#{row.hotenbenhnhan,jdbcType=NVARCHAR}, namSinh =
		#{row.namsinh,jdbcType=NVARCHAR}, gioiTinh =
		#{row.gioitinh,jdbcType=NVARCHAR}, SDT = #{row.sdt,jdbcType=NVARCHAR},
		diaChi = #{row.diachi,jdbcType=NVARCHAR}, email =
		#{row.email,jdbcType=NVARCHAR}, hoTenBacSi =
		#{row.hotenbacsi,jdbcType=NVARCHAR}, ngaydat =
		#{row.ngaydat,jdbcType=NVARCHAR}, note = #{row.note,jdbcType=NVARCHAR} <if
			test="example != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<insert id="save" parameterType="com.web.hospital.model.booking">
		INSERT INTO Booking(hoTenBenhNhan, namSinh, gioiTinh, SDT, diaChi, email, hoTenBacSi, ngaydat, loiNhan, idd,
							mount, day, id, idphong , thoigiandat)
		values (#{hotenbenhnhan}, #{namsinh}, #{gioitinh}, #{sdt}, #{diachi}, #{email}, #{hotenbacsi}, null, #{loinhan},
				#{idd}, #{mount}, #{day}, #{id}, #{idphong} , #{thoigiandat})
	</insert>

	<insert id="savebydoc" parameterType="com.web.hospital.model.booking">
		INSERT INTO Booking(hoTenBenhNhan, namSinh, gioiTinh, SDT, diaChi, email, hoTenBacSi, ngaydat, loiNhan, idd,
							mount, day, id, idphong , thoigiandat)
		values (#{hotenbenhnhan}, #{namsinh}, #{gioitinh}, #{sdt}, #{diachi}, #{email}, #{hotenbacsi}, NULL, #{loinhan},
				#{idd}, #{mount}, #{day}, NULL, #{idphong} , #{thoigiandat})
	</insert>

	<select id="getnewbooking" parameterType="com.web.hospital.model.booking"
		resultMap="BaseResultMap">
		SELECT TOP 1 Booking.*, Doctor.gia
		FROM Booking
		INNER JOIN Doctor ON Booking.idD = Doctor.idD
		ORDER BY Booking.stt DESC
	</select>
	<select id="listBookingByidD" parameterType="com.web.hospital.model.booking"
		resultMap="BaseResultMap">
		select
		*
		from
		Booking
		where
		idd = #{idd}
	</select>
	<select id="findbystt" parameterType="com.web.hospital.model.booking"
		resultMap="BaseResultMap">
		select
		*
		from
		Booking
		where
		stt = #{stt}
	</select>
	<update id="updateBooking" parameterType="com.web.hospital.model.booking">
		UPDATE Booking
		SET hotenbenhnhan = #{hotenbenhnhan}, namsinh = #{namsinh}, gioitinh=#{gioitinh} , sdt=#{sdt} ,
		diachi=#{diachi},email=#{email}, day=#{day} , loinhan=#{loinhan}
		WHERE stt=#{stt};
	</update>
	<delete id="deletebyStt" parameterType="com.web.hospital.model.booking">
		delete from Booking
		where stt = #{stt}
	</delete>

	<select id="checkBookingbyID" parameterType="com.web.hospital.model.booking">

		select booking.*, phong_kham.dia_chi AS diachiPhong
		from booking
				 INNER JOIN phong_kham on booking.idphong = phong_kham.idphong
		where booking.id = #{id}
		ORDER BY Stt ASC

	</select>

</mapper>